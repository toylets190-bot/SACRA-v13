<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SACRA v17 | Moderação e Institucional</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Inter:wght@300;400;500&family=Playfair+Display:ital,wght@0,400;0,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-deep: #030303;
            --bg-card: rgba(20, 20, 20, 0.7);
            --gold-primary: #d4af37;
            --gold-metallic: linear-gradient(135deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
        }

        body { 
            background-color: var(--bg-deep); 
            color: #e2e8f0; 
            font-family: 'Inter', sans-serif;
            background-image: radial-gradient(circle at 50% 0%, rgba(212, 175, 55, 0.08) 0%, transparent 50%);
        }

        .font-sacro { font-family: 'Cinzel Decorative', serif; }
        .font-reading { font-family: 'Playfair Display', serif; }

        .btn-sacra {
            display: inline-block;
            position: relative;
            background: transparent;
            color: var(--gold-primary);
            border: 1px solid var(--gold-primary);
            padding: 12px 30px;
            font-size: 0.75rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            font-weight: 700;
            transition: all 0.4s ease;
            cursor: pointer;
            text-align: center;
        }
        .btn-sacra:hover { background: var(--gold-primary); color: black; box-shadow: 0 0 20px rgba(212, 175, 55, 0.4); }

        .glass-panel {
            background: var(--bg-card);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s;
        }

        .section-view { display: none; opacity: 0; animation: fadeIn 0.8s forwards; padding-top: 100px; min-height: 100vh; }
        .section-view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .input-sacra {
            background: rgba(255,255,255,0.03);
            border-bottom: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 1rem;
            width: 100%;
        }
        .input-sacra:focus { outline: none; border-color: var(--gold-primary); }

        .modal-overlay {
            display: none; position: fixed; z-index: 2000; inset: 0;
            background: rgba(0,0,0,0.95); justify-content: center; align-items: center;
        }
        .modal-overlay.active { display: flex; }
        
        .delete-badge {
            font-size: 10px;
            color: #ff4444;
            cursor: pointer;
            border: 1px solid #ff4444;
            padding: 2px 6px;
            border-radius: 4px;
            transition: 0.3s;
        }
        .delete-badge:hover { background: #ff4444; color: white; }
    </style>
</head>
<body>

    <nav class="fixed w-full z-50 border-b border-white/5 bg-black/80 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-6 h-24 flex items-center justify-between">
            <div class="flex flex-col cursor-pointer" onclick="navigate('home')">
                <h1 class="font-sacro text-2xl tracking-[0.2em] text-[var(--gold-primary)]">SACRA</h1>
                <span class="text-[8px] uppercase tracking-[0.4em] text-gray-500">Aeterna Veritas</span>
            </div>
            <div class="hidden lg:flex items-center gap-8 text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400">
                <button onclick="navigate('liturgia')" class="hover:text-white transition">Liturgia</button>
                <button onclick="navigate('biblioteca')" class="hover:text-white transition">Biblioteca</button>
                <button onclick="navigate('oracoes')" class="hover:text-white transition">Orações</button>
                <button onclick="navigate('sobre')" class="hover:text-white transition">Sobre</button>
                <button onclick="navigate('contato')" class="hover:text-white transition">Contato</button>
                <button onclick="navigate('escrever')" class="text-[var(--gold-primary)]"><i class="fas fa-pen-nib"></i></button>
                <button onclick="adminLogin()" class="hover:text-white"><i class="fas fa-key"></i></button>
            </div>
        </div>
    </nav>

    <main>
        
        <section id="home" class="section-view active flex flex-col items-center justify-center text-center">
            <h2 class="font-reading text-6xl md:text-8xl font-bold mb-4">Sacrum Convivium</h2>
            <p class="text-gray-400 max-w-lg mx-auto mb-8">Role para baixo para acessar os conteudos.</p>
            <button onclick="navigate('liturgia')" class="btn-sacra">Explorar</button>
        </section>

        <section id="liturgia" class="section-view max-w-5xl mx-auto px-6">
            <div class="text-center mb-12">
                <h2 id="tempo-liturgico" class="text-[var(--gold-primary)] uppercase tracking-widest text-sm mb-2">Carregando Tempo...</h2>
                <h3 class="font-sacro text-4xl mb-4">Liturgia de Hoje</h3>
                <p id="santo-do-dia" class="font-reading italic text-xl text-gray-400">Carregando Santo...</p>
            </div>
            <div class="glass-panel p-8 md:p-12">
                <div id="liturgia-content" class="font-reading text-xl leading-relaxed text-center italic">
                    "Buscai as coisas do alto, onde Cristo está sentado à direita de Deus."
                </div>
            </div>
            <div class="flex justify-center gap-4 mt-8">
                <a href="https://www.cnbb.org.br/liturgia-diaria/" target="_blank" class="btn-sacra text-[9px]">Fonte CNBB</a>
            </div>
        </section>

        <section id="biblioteca" class="section-view max-w-7xl mx-auto px-6">
            <h2 class="font-sacro text-4xl mb-12 text-center">Scriptorium</h2>
            <div id="grid-artigos" class="grid md:grid-cols-3 gap-8"></div>
        </section>

        <section id="sobre" class="section-view max-w-4xl mx-auto px-6">
            <div class="glass-panel p-12">
                <h2 class="font-sacro text-3xl mb-8 text-[var(--gold-primary)]">Sobre o Projeto</h2>
                <div class="font-reading text-xl space-y-6 leading-relaxed">
                    <p>O SACRA é um repositório dedicado à preservação da cultura católica tradicional e do pensamento clássico.</p>
                    <p>Nossa missão é oferecer um espaço de silêncio e beleza em meio ao caos digital, conectando fiéis às leituras diárias, artes sacras e orações comunitárias.</p>
                </div>
            </div>
        </section>

        <section id="contato" class="section-view max-w-4xl mx-auto px-6">
            <div class="glass-panel p-12">
                <h2 class="font-sacro text-3xl mb-8 text-[var(--gold-primary)]">Contato</h2>
                <p class="mb-8 text-gray-400">Para sugestões ou envio de manuscritos originais, utilize o canal abaixo:</p>
                <div class="space-y-4">
                    <input type="text" placeholder="Assunto" class="input-sacra">
                    <textarea placeholder="Sua mensagem..." class="input-sacra h-32 resize-none"></textarea>
                    <button class="btn-sacra w-full">Enviar Mensagem</button>
                </div>
            </div>
        </section>

        <section id="oracoes" class="section-view max-w-5xl mx-auto px-6">
            <h2 class="font-sacro text-4xl mb-12 text-center">Capela Virtual</h2>
            <div class="grid md:grid-cols-2 gap-12">
                <div class="glass-panel p-8">
                    <h3 class="font-sacro text-xl mb-6">Pedir Intercessão</h3>
                    <input id="prayer-name" type="text" placeholder="Seu Nome" class="input-sacra mb-4">
                    <textarea id="prayer-content" placeholder="Sua intenção..." class="input-sacra h-32 mb-6 resize-none"></textarea>
                    <button onclick="submitPrayer()" class="btn-sacra w-full">Ofertar</button>
                </div>
                <div id="prayer-wall" class="space-y-4 max-h-[500px] overflow-y-auto pr-4"></div>
            </div>
        </section>

        <section id="admin" class="section-view max-w-6xl mx-auto px-6">
            <div class="flex justify-between items-center mb-10">
                <h2 class="font-sacro text-3xl text-[var(--gold-primary)]">Controle de Moderação</h2>
                <button onclick="navigate('home')" class="text-xs text-red-500">Sair do Modo Admin</button>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 space-y-8">
                    <div class="glass-panel p-6">
                        <h3 class="text-xs uppercase tracking-widest text-gray-500 mb-6">Pendentes para Aprovação</h3>
                        <div id="admin-pending-list" class="space-y-4"></div>
                    </div>
                    <div class="glass-panel p-6 border-t border-red-900/40">
                        <h3 class="text-xs uppercase tracking-widest text-red-500 mb-6">Acervo Publicado (Excluir)</h3>
                        <div id="admin-published-list" class="space-y-4"></div>
                    </div>
                </div>
                <div class="glass-panel p-6">
                    <h3 class="text-xs uppercase tracking-widest text-gray-500 mb-6">Moderar Orações</h3>
                    <div id="admin-prayer-list" class="space-y-4 max-h-[600px] overflow-y-auto"></div>
                </div>
            </div>
        </section>

        <section id="escrever" class="section-view max-w-3xl mx-auto px-6">
            <div class="glass-panel p-10">
                <h2 class="font-sacro text-3xl mb-8 text-center">Novo Artigo</h2>
                <input id="art-title" type="text" placeholder="Título" class="input-sacra mb-6 text-xl">
                <input id="art-image" type="text" placeholder="URL da Foto (opcional)" class="input-sacra mb-6">
                <textarea id="art-content" placeholder="Conteúdo..." class="input-sacra h-64 mb-8 resize-none"></textarea>
                <button onclick="submitArticle()" class="btn-sacra w-full">Submeter</button>
            </div>
        </section>

        <section id="leitor" class="section-view max-w-4xl mx-auto px-6">
            <button onclick="navigate('biblioteca')" class="mb-8 text-[var(--gold-primary)] text-xs uppercase"><i class="fas fa-arrow-left"></i> Voltar</button>
            <div id="leitor-banner" class="w-full h-96 bg-cover bg-center rounded mb-10 hidden"></div>
            <h1 id="leitor-titulo" class="font-sacro text-5xl mb-8 text-center"></h1>
            <div id="leitor-conteudo" class="font-reading text-xl leading-relaxed text-justify space-y-6"></div>
        </section>

    </main>

    <script>
        // BANCO DE DADOS
        let articles = JSON.parse(localStorage.getItem('sacra_articles')) || [
            { id: 1, title: "Exemplo de Postagem", content: "Este é um artigo padrão para demonstrar o visual da biblioteca. Você pode excluí-lo no painel administrativo usando a senha AMDG.", status: "aprovado", image: "" }
        ];
        let prayers = JSON.parse(localStorage.getItem('sacra_prayers')) || [];

        window.onload = () => {
            renderArticles();
            renderPrayers();
            updateLiturgia();
        };

        function navigate(id) {
            document.querySelectorAll('.section-view').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
            if(id === 'admin') renderAdminDashboard();
        }

        // LITURGIA (BASEADA EM DATA REAL)
        function updateLiturgia() {
            const h = new Date();
            const dias = ["Domingo", "Segunda-feira", "Terça-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira", "Sábado"];
            const meses = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
            
            document.getElementById('tempo-liturgico').innerText = `Ciclo Litúrgico - ${dias[h.getDay()]}, ${h.getDate()} de ${meses[h.getMonth()]}`;
            document.getElementById('santo-do-dia').innerText = "Veneração do dia conforme o Calendário Romano";
        }

        // ORAÇÕES
        function submitPrayer() {
            const name = document.getElementById('prayer-name').value || "Anônimo";
            const content = document.getElementById('prayer-content').value;
            if(!content) return;
            
            prayers.unshift({ id: Date.now(), name, content });
            localStorage.setItem('sacra_prayers', JSON.stringify(prayers));
            renderPrayers();
            document.getElementById('prayer-content').value = "";
            alert("Sua intenção foi ofertada.");
        }

        function renderPrayers() {
            document.getElementById('prayer-wall').innerHTML = prayers.map(p => `
                <div class="border-l-2 border-[var(--gold-primary)] pl-4 py-2 bg-white/5 transition hover:bg-white/10">
                    <p class="italic text-gray-300 font-reading">"${p.content}"</p>
                    <p class="text-[10px] text-[var(--gold-primary)] mt-1">— ${p.name}</p>
                </div>
            `).join('');
        }

        // BIBLIOTECA
        function submitArticle() {
            const title = document.getElementById('art-title').value;
            const content = document.getElementById('art-content').value;
            const image = document.getElementById('art-image').value;
            if(!title || !content) return alert("Por favor, preencha o título e o conteúdo.");

            articles.push({ id: Date.now(), title, content, image, status: 'pendente' });
            localStorage.setItem('sacra_articles', JSON.stringify(articles));
            alert("Artigo enviado! Aguarde a aprovação do moderador.");
            
            // Limpar campos
            document.getElementById('art-title').value = "";
            document.getElementById('art-content').value = "";
            document.getElementById('art-image').value = "";
            
            navigate('biblioteca');
        }

        function renderArticles() {
            const grid = document.getElementById('grid-artigos');
            const aprovados = articles.filter(a => a.status === 'aprovado');
            
            if(aprovados.length === 0) {
                grid.innerHTML = '<p class="col-span-3 text-center text-gray-500 font-reading italic">O scriptorium está em silêncio... Nenhum manuscrito publicado.</p>';
                return;
            }

            grid.innerHTML = aprovados.map(a => `
                <div class="glass-panel p-6 cursor-pointer hover:border-[var(--gold-primary)] group" onclick="readArticle(${a.id})">
                    ${a.image ? `<img src="${a.image}" class="w-full h-40 object-cover mb-4 rounded opacity-80 group-hover:opacity-100 transition">` : ''}
                    <h3 class="font-sacro text-xl mb-2 text-[var(--gold-primary)]">${a.title}</h3>
                    <p class="text-sm text-gray-400 line-clamp-3 font-reading italic">${a.content}</p>
                    <div class="mt-4 text-[10px] tracking-widest text-gray-600 uppercase">Leia o Manuscrito →</div>
                </div>
            `).join('');
        }

        function readArticle(id) {
            const a = articles.find(art => art.id === id);
            if(!a) return;
            document.getElementById('leitor-titulo').innerText = a.title;
            document.getElementById('leitor-conteudo').innerText = a.content;
            const banner = document.getElementById('leitor-banner');
            if(a.image) {
                banner.style.backgroundImage = `url(${a.image})`;
                banner.classList.remove('hidden');
            } else banner.classList.add('hidden');
            navigate('leitor');
        }

        // MODERAÇÃO (ADMIN)
        function adminLogin() {
            const pass = prompt("Chave da Sacristia:");
            if(pass === "AMDG") {
                navigate('admin');
            } else if (pass !== null) {
                alert("Chave incorreta.");
            }
        }

        function renderAdminDashboard() {
            // Lista de Pendentes
            const pendingList = articles.filter(a => a.status === 'pendente');
            document.getElementById('admin-pending-list').innerHTML = pendingList.length ? pendingList.map(a => `
                <div class="p-4 bg-white/5 border border-white/10 flex justify-between items-center">
                    <span class="font-reading">${a.title}</span>
                    <div class="flex gap-2">
                        <button onclick="approveArt(${a.id})" class="text-green-500 text-[10px] border border-green-500 px-3 py-1 hover:bg-green-500 hover:text-black transition">APROVAR</button>
                        <button onclick="deleteArt(${a.id})" class="text-red-500 text-[10px] border border-red-500 px-3 py-1 hover:bg-red-500 hover:text-white transition">REJEITAR</button>
                    </div>
                </div>
            `).join('') : '<p class="text-gray-600 text-xs italic">Nenhum manuscrito aguardando revisão.</p>';

            // Lista de Publicados para Exclusão
            const approvedList = articles.filter(a => a.status === 'aprovado');
            document.getElementById('admin-published-list').innerHTML = approvedList.length ? approvedList.map(a => `
                <div class="p-4 bg-white/5 flex justify-between items-center border-b border-white/5">
                    <span class="text-gray-400 text-sm font-reading">${a.title}</span>
                    <button onclick="deleteArt(${a.id})" class="delete-badge uppercase font-bold">Excluir do Site</button>
                </div>
            `).join('') : '<p class="text-gray-600 text-xs italic">Nenhum artigo publicado.</p>';

            // Lista de Orações para Moderação
            document.getElementById('admin-prayer-list').innerHTML = prayers.length ? prayers.map(p => `
                <div class="p-4 border-b border-white/5 flex justify-between items-start bg-white/5 mb-2">
                    <div class="max-w-[80%]">
                        <p class="text-[10px] text-[var(--gold-primary)] uppercase font-bold">${p.name}</p>
                        <p class="text-xs italic text-gray-400">"${p.content.substring(0,80)}${p.content.length > 80 ? '...' : ''}"</p>
                    </div>
                    <button onclick="deletePrayer(${p.id})" class="text-red-500 hover:text-red-300 transition p-2"><i class="fas fa-trash-alt"></i></button>
                </div>
            `).join('') : '<p class="text-gray-600 text-xs italic text-center">A capela está vazia.</p>';
        }

        function approveArt(id) {
            const a = articles.find(x => x.id === id);
            if(a) {
                a.status = 'aprovado';
                saveAndRefresh();
            }
        }

        function deleteArt(id) {
            if(confirm("Deseja apagar este manuscrito permanentemente? Esta ação não pode ser desfeita.")) {
                articles = articles.filter(x => x.id !== id);
                saveAndRefresh();
            }
        }

        function deletePrayer(id) {
            if(confirm("Remover esta intenção de oração?")) {
                prayers = prayers.filter(x => x.id !== id);
                localStorage.setItem('sacra_prayers', JSON.stringify(prayers));
                renderAdminDashboard();
                renderPrayers();
            }
        }

        function saveAndRefresh() {
            localStorage.setItem('sacra_articles', JSON.stringify(articles));
            renderAdminDashboard();
            renderArticles();
        }
    </script>
</body>
</html>

